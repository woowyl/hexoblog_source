---
layout: post
title: "box-sizing与盒子模型"
subtitle: "如何使用box-sizing"
date: 2017-04-26
author: "Yuanliang"
catalog: true
tags:
	- 总结
	- 学习
	- 2017
---

#### 两种盒子模型
关于盒子模型，可以说是前端工程师的入门知识了。提到它我们会想到,margin,padding,border,width,height这些CSS属性，以及“标准盒子”和“IE盒子”两个概念。
那么他的定义是什么样子的呢?
![](standard-box.jpg)
 可以看出，在标准盒子中，元素在页面中实际占用的宽度 = CSS属性width + 2 \* CSS属性padding + 2\*CSS元素border + 2\*CSS元素margin
![](ie-box.jpg)
 在IE盒子中，元素在页面实际占用的宽度 = CSS属性width +  2\*CSS元素margin
 > 与标准盒子模型相比，IE盒子模型中  **CSS属性width = 内容宽 + padding宽 + border宽**

>在很长一段时间，我都认为，IE浏览器全部会表现为IE盒子,可能和“IE盒子”这个命名有关。但其实，从IE8开始，IE浏览器已开始默认使用一种尝试于这两者之间妥协的“近乎标准”（almost standards）模式，实施了一种表单元格尺寸的怪异行为，除此之外符合标准定义。“IE盒子”真正出现的情况是指，在怪异模式下的盒子模型，而怪异模式是在IE6时候的定义。所以个人认为叫“标准盒子”和“怪异盒子”更容易让人理解。

那么怪异模式和标准模式有什么区别呢？

#### 标准模式和怪异模式的区别
在HTML与CSS的标准化未完成之前，各个浏览器对于HTML和CSS的解析有各自不同的实现，而有很多旧的网页都是按照这些非标准的实现去设计的。在HTML与CSS标准确定之后，浏览器一方面要按照标准去实现对HTML与CSS的支持，另一方面又要***保证对非标准的旧网页设计的后向兼容性***。因此，现代的浏览器一般都有两种渲染模式：标准模式和怪异模式。在标准模式下，浏览器按照HTML与CSS标准对文档进行解析和渲染；而在怪异模式下，浏览器则按照旧有的非标准的实现方式对文档进行解析和渲染。这样的话，对于旧有的网页，浏览器启动怪异模式，就能够使得旧网页正常显示；对于新的网页，则可以启动标准模式，使得新网页能够使用HTML与CSS的标准特性。

###### 我的理解：
在标准出来之前，各个浏览器厂商指定了自己的标准（比如微软的IE），然后工程师按照他们的标准，进行了网页开发。但随着W3C标准的指定，浏览器解析标准逐步统一，有些解析标准与之前各家的标准并不完全统一，按照之前标准开发的网页在现代浏览器里展示出现了变形。
在这个背景下，标准模式和怪异模式，应运而生。html文档可以自己定义想要解析的模式，如果选择了标准模式就按标准解析，如果使怪异模式
#### box-sizing 影响盒子布局
> **box-sizing: content-box | border-box | inherit**

|值|描述|
|----|-----|
|content-box| 这是由 CSS2.1 规定的宽度高度行为。<br>宽度和高度分别应用到元素的内容框。<br>在宽度和高度之外绘制元素的内边距和边框。|
|border-box|为元素设定的宽度和高度决定了元素的边框盒。<br>就是说，为元素指定的任何内边距和边框都将在已设定的宽度和高度内进行绘制。<br>通过从已设定的宽度和高度分别减去边框和内边距才能得到内容的宽度和高度。|
|inherit|规定应从父元素继承 box-sizing 属性的值。|


之前，怪异模式给我们带来了很多痛苦，但其实有时候怪异模式的表现，更符合我们对页面的定义。
比如我们再给元素设置了宽（width）高（height）之后，是希望他们在页面的展示也是按照我们设置的宽高进行展示，但事实并非如此，默认的标准盒子模型，会将border和padding值一起加进来，超出width定义。
比如：
下面这段代码
``` css
.box {
	background: #c4f5ff;
        border: 50px solid #f3f2b5;
        padding: 50px;
        margin: 50px;
        width: 400px;
        height: 300px;
      }
```
1. 默认`box-sizing:content-box` 即标准盒子：
 div的宽度（不包括margin） = 400px+2\*50+2\*50 = 600px;
![](content-box.jpeg)

2. 但如果我们使用了 `box-sizing:border-box`,width值包含了border和padding值，
div的宽度（不包括margin） = 400px;
![](border-box.jpeg)

3. box-sizing设置前后对比，
 ![](box-sizing.gif)
 
 > 结论:`box-sizing：border-box`让CSS中元素width的定义为div在页面实际展示的宽度。

#### 什么时候会出现怪异模式
平常编写网页的时候，一般都会见到HTML文档的头部会有文档类型声明：DOCTYPE。当浏览器遇到正确的文档声明时，浏览器就会启动标准模式，按照制定的文档类型标准解析和渲染文档。而对于旧有的网页，由于网页编写的当时标准还没有确定，所以一般是不会有文档类型声明的。所以，对于没有文档类型声明或者文档类型声明不正确的文档，浏览器就会认为它是一个旧的HTML文档，就会使用怪异模式解析和渲染该文档。关于DOCTYPE的更详细说明，请戳这里[DOCTYPE声明作用及用法详解](http://www.jb51.net/web/34217.html)。
#### 参考链接
[怪异模式](https://zh.wikipedia.org/wiki/%E6%80%AA%E5%BC%82%E6%A8%A1%E5%BC%8F)
[浏览器的标准模式与怪异模式](http://www.jianshu.com/p/dcab7cde8c04)

      
 
   
